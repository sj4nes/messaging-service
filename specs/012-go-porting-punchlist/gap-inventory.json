{
  "generatedAt": "2025-11-12T00:00:00Z",
  "gaps": [
    {
      "id": "GAP-001",
      "category": "Observability",
      "priority": "Medium",
      "expectedBehavior": "Rust exposes worker_* counters tied to inbound DB worker lifecycle.",
      "actualBehavior": "Go simulates worker_processed by incrementing in synchronous handlers (sms/email) instead of real async processing.",
      "reproductionSteps": "Review go/api/messages.go for IncWorkerProcessed calls; send SMS then curl /metrics to see increment.",
      "acceptanceCriteria": "Simulation documented as provisional with TODO to move increments to real worker or remove before final parity.",
      "status": "Closed",
      "createdAt": "2025-11-12T00:00:00Z",
      "updatedAt": "2025-11-12T00:00:00Z"
    },
    {
      "id": "GAP-002",
      "category": "Data",
      "priority": "Low",
      "expectedBehavior": "Seed ensures deterministic baseline data early; parity expects documented timing.",
      "actualBehavior": "Go may use lazy seed before first list causing initial metrics scrape prior to data.",
      "reproductionSteps": "Start fresh containers; immediately request /api/conversations and /metrics.",
      "acceptanceCriteria": "Document lazy seeding clearly OR switch to eager at startup for deterministic first scrape.",
      "status": "Open",
      "createdAt": "2025-11-12T00:00:00Z",
      "updatedAt": "2025-11-12T00:00:00Z"
    },
    {
      "id": "GAP-003",
      "category": "Observability",
      "priority": "Low",
      "expectedBehavior": "Parity expects JSON metrics snapshot fields per metrics-parity.md.",
      "actualBehavior": "Go might emit Prometheus text format if instrumentation is added later.",
      "reproductionSteps": "curl /metrics and inspect format and fields.",
      "acceptanceCriteria": "Provide JSON endpoint (current) or a shim ensuring test harness compatibility.",
      "status": "Open",
      "createdAt": "2025-11-12T00:00:00Z",
      "updatedAt": "2025-11-12T00:00:00Z"
    },
    {
      "id": "GAP-004",
      "category": "Operability",
      "priority": "Low",
      "expectedBehavior": "Per-provider breaker transition counters increment on state changes.",
      "actualBehavior": "Go placeholders may not increment yet.",
      "reproductionSteps": "Force provider errors; observe provider_*_breaker_transitions counters.",
      "acceptanceCriteria": "Implement increments on breaker transitions OR defer with documentation.",
      "status": "Open",
      "createdAt": "2025-11-12T00:00:00Z",
      "updatedAt": "2025-11-12T00:00:00Z"
    },
    {
      "id": "GAP-005",
      "category": "Functional",
      "priority": "Medium",
      "expectedBehavior": "Rust: page_size=0 => unbounded; honors pageSize query param.",
      "actualBehavior": "Go honors pageSize; meta.page_size reflects query; 0 is unbounded.",
      "reproductionSteps": "curl -sS -H 'Accept: application/json' $BASE_URL/api/conversations?page=1&pageSize=0 | jq .meta; expect page_size: 0; repeat with pageSize=10; expect page_size: 10.",
      "acceptanceCriteria": "As implemented; tests added to assert meta.page_size parity.",
      "status": "Closed",
      "createdAt": "2025-11-12T00:00:00Z",
      "updatedAt": "2025-11-13T00:00:00Z"
    },
    {
      "id": "GAP-006",
      "category": "Functional",
      "priority": "Low",
      "expectedBehavior": "Legacy id=1 fallback to first conversation when DB IDs differ.",
      "actualBehavior": "Go implements fallback; tests pass.",
      "reproductionSteps": "After DB seed, call /api/conversations/1/messages when first conversation ID != 1.",
      "acceptanceCriteria": "Behavior documented and test remains green.",
      "status": "Closed",
      "createdAt": "2025-11-12T00:00:00Z",
      "updatedAt": "2025-11-12T00:00:00Z"
    }
  ]
}
